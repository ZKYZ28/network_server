Index: app/src/main/java/org/helmo/murmurG6/controller/ServerController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.helmo.murmurG6.controller;\r\n\r\nimport org.helmo.murmurG6.controller.exceptions.UnableToConnectToClientException;\r\nimport org.helmo.murmurG6.controller.exceptions.UnableToExecuteTaskException;\r\nimport org.helmo.murmurG6.controller.exceptions.UnableToRunClientException;\r\nimport org.helmo.murmurG6.infrastructure.ServerJsonStorage;\r\nimport org.helmo.murmurG6.models.*;\r\nimport org.helmo.murmurG6.repository.TrendRepository;\r\nimport org.helmo.murmurG6.repository.UserRepository;\r\nimport org.helmo.murmurG6.repository.exceptions.UnableToLoadServerConfigurationException;\r\nimport org.helmo.murmurG6.repository.exceptions.UnableToSaveTrendLibraryException;\r\nimport org.helmo.murmurG6.repository.exceptions.UnableToSaveUserLibraryException;\r\nimport org.helmo.murmurG6.utils.UltraImportantClass;\r\n\r\nimport javax.net.ssl.SSLServerSocket;\r\nimport javax.net.ssl.SSLServerSocketFactory;\r\nimport javax.net.ssl.SSLSocket;\r\nimport java.io.IOException;\r\nimport java.net.InetAddress;\r\nimport java.net.UnknownHostException;\r\nimport java.util.*;\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\n\r\n/**\r\n * La classe ServerController représente le contrôleur principal de l'application serveur.\r\n * Cette classe gère la connexion des clients et communique avec la classe ClientRunnable pour gérer la communication avec les clients.\r\n */\r\npublic class ServerController implements AutoCloseable {\r\n    private final Set<ClientRunnable> clientList = Collections.synchronizedSet(new HashSet<>());\r\n    private final SSLServerSocket serverSocket;\r\n    private final UserRepository userRepository;\r\n    private final TrendRepository trendRepository;\r\n    private final UserLibrary userLibrary;\r\n    private final TrendLibrary trendLibrary; //TODO Executor: quand follow, enregistrer le follower de la trend\r\n    private final ServerConfig serverConfig;\r\n\r\n    /**\r\n     * Le constructeur de la classe ServerController permet de créer un nouveau serveur en spécifiant un numéro de port et un storage d'utilisateurs.\r\n     *\r\n     * @param port            Le numéro de port sur lequel le serveur écoutera les connexions entrantes.\r\n     * @param userRepository  Le storage d'utilisateurs qui sera utilisé pour enregistrer et lire les informations d'utilisateur.\r\n     * @param trendRepository Le storage de tendances qui sera utilisé pour enregistrer et lire les informations de tendances.\r\n     * @throws IOException En cas d'échec de la création du socket serveur.\r\n     */\r\n    public ServerController(int port, UserRepository userRepository, TrendRepository trendRepository) throws IOException {\r\n        SSLServerSocketFactory sslServerSocketFactory = (SSLServerSocketFactory) SSLServerSocketFactory.getDefault();\r\n        this.serverSocket = (SSLServerSocket) sslServerSocketFactory.createServerSocket(port);\r\n\r\n        this.userRepository = userRepository;\r\n        this.trendRepository = trendRepository;\r\n\r\n        this.userLibrary = userRepository.load();\r\n        this.trendLibrary = trendRepository.load();\r\n\r\n        this.serverConfig = new ServerJsonStorage().load();\r\n        this.serverConfig.setServerIp(getDomain());\r\n\r\n        UltraImportantClass.welcome();\r\n        System.out.println(\"****************************************************************\");\r\n        System.out.println(\"********     SERVER ONLINE ! IP : \" + getDomain() + \"     ********\");\r\n        System.out.println(\"****************************************************************\");\r\n    }\r\n\r\n\r\n    public void start() throws IOException {\r\n        try {\r\n            TaskScheduler executor = Executor.getInstance();\r\n            executor.setServer(this);\r\n            new Thread(executor).start();\r\n            while (!this.serverSocket.isClosed()) {\r\n                SSLSocket client = (SSLSocket) serverSocket.accept();\r\n                System.out.println(\"Quelqu'un s'est connecté!\");\r\n                ClientRunnable runnable = new ClientRunnable(client);\r\n                clientList.add(runnable);\r\n                new Thread(runnable).start();\r\n            }\r\n        } catch (UnableToConnectToClientException | UnableToRunClientException | UnableToExecuteTaskException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    /**\r\n     * Cast un message à des utilisateurs locaux ou distant\r\n     * @param sender Le thread Client Emetteur du message\r\n     * @param message le message à caster\r\n     */\r\n    public void castMsg(User sender, String message) {\r\n        //Tactique: on gère d'abord l'envoi des message aux followers du sender, ensuite on gerera les messages aux followers des trends\r\n\r\n        System.out.printf(\"Message envoyé : %s\\n\", message);\r\n        UUID idMessage = UUID.randomUUID();\r\n\r\n        //Envoi du message au followers de l'emmetteur du message\r\n        castToFollowers(sender, sender.getUserFollowers(), message, idMessage);\r\n\r\n        //Si le message fait mention d'au moins 1 trend -> envoi des message aux abonnés de la trend\r\n        if(extractTrends(message).size() > 0){\r\n            castToTrendFollowers(sender, extractTrends(message), message, idMessage);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gère le casting de message pour à des followers d'un user\r\n     * @param senderClient L'emetteur du message\r\n     * @param followers La liste des creditentials des followers (ex: antho123@server1)\r\n     * @param message Le message à caster\r\n     * @param idMessage L'id unique associé à ce message\r\n     */\r\n    private void castToFollowers(User senderClient, Set<UserCredentials> followers, String message, UUID idMessage) {\r\n        //Parcours de la liste des followers du sender + envoi des message\r\n        for(UserCredentials followerCreditential: followers){\r\n            manageMessageSending(senderClient, followerCreditential, idMessage, message);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Gère le casting de message pour à des followers d'une Trend\r\n     * @param senderClient L'emetteur du message\r\n     * @param followers La liste des creditentials des followers de la trend(ex: antho123@server1)\r\n     * @param message Le message à caster\r\n     * @param idMessage L'id unique associé à ce message\r\n     */\r\n    private void castToTrendFollowers(User senderClient, Set<String> trends, String message, UUID idMessage) {\r\n        //On parcours les trends mentionné dans le message\r\n        for(String trendName: trends){\r\n\r\n            //Si l'emetteur du message est bien abonné à la trend on gère l'envoi, sinon on ne fait rien\r\n            if(senderClient.getTrendByTag(trendName) != null) {\r\n                //On regarde si la trend appartient à ce server\r\n                if (trendLibrary.containsKey(trendName)) {\r\n\r\n                    //Si oui, alors on itère sur les followers de cette trends afin de leur écrire\r\n                    for (UserCredentials trendFollowersCredential : trendLibrary.get(trendName)) {\r\n                        manageMessageSending(senderClient, trendFollowersCredential, idMessage, message);\r\n                    }\r\n\r\n\r\n                //Si non (cas ou la trend n'appartient PAS à ce server) -> on passe la trend au relay\r\n                } else {\r\n                    Trend t = senderClient.getTrendByTag(trendName);\r\n                    relay.sendMessage(Protocol.build_SEND(idMessage.toString(), senderClient.getLogin(), t.toString(), message));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private void manageMessageSending(User sender, UserCredentials followerCredential, UUID idMessage, String message) {\r\n        //on regarde si le destinataire est sur ce server ou sur un autre domaine\r\n        if(followerCredential.getDomain().equals(serverConfig.getServerName())){\r\n\r\n            //On recupere le threadClient sur le server du destinataire afin de lui écrire\r\n            ClientRunnable client = getClientRunnableByLogin(followerCredential.getLogin());\r\n\r\n            //Gere l'envoi du message en local (aux user de CE server)\r\n            operateLocalMessageSend(sender, idMessage, message, client);\r\n\r\n\r\n            //Si le destinataire n'appartient pas à ce server\r\n        }else{\r\n            relay.sendMessage(Protocol.build_SEND(idMessage.toString(), sender.getCreditential.toString(), followerCredential.toString(), message));\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Gère l'envoi du message localement (aux utilisateur de CE server)\r\n     * @param sender L'emetteur du message\r\n     * @param idMessage L'id du message\r\n     * @param message Le message\r\n     * @param client Le thread ClientRunnable du destinataire sur ce server\r\n     */\r\n    private void operateLocalMessageSend(User sender, UUID idMessage, String message, ClientRunnable client) {\r\n        //Si le client est connecté\r\n        if(client != null) {\r\n\r\n            //On recupere l'objet User associé à ce thread client afin de pourvoir gérer son historique\r\n            User follower = client.getUser();\r\n\r\n            //Si le destinataire n'a pas déja recu ce message, alors on lui écrit et enregistre cet événement dans son historique\r\n            if(!follower.hasAlreadyReceived(idMessage))\r\n                try {\r\n                    client.sendMessage(Protocol.build_MSGS(sender.getLogin() + \"@\" + getIp() + \" \" + AESCrypt.encrypt(message, serverConfig.getBase64KeyAES())));\r\n                    follower.saveReceivedMessageId(idMessage);\r\n                }catch (Exception e){\r\n                    System.out.println(\"Erreur lors de l'envoi du message (encryption error)\");\r\n                }\r\n\r\n        //Si le destinataire n'est pas actuellement connecté\r\n        }else{\r\n            //TODO : Extension file de message quand le client n'est pas connecté (quand il est nul dans ce cas ci)\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Recupere toute les trend (uniquement leur name) mentionnée dans un message\r\n     * @param message le message ananlysé\r\n     * @return un set de tagname\r\n     */\r\n    private Set<String> extractTrends(String message) {\r\n        Matcher matcher = Pattern.compile(Protocol.TAG).matcher(message);\r\n        HashSet<String> matches = new HashSet<>();\r\n        while (matcher.find()) {\r\n            matches.add(matcher.group()); //Ex: #trend\r\n        }\r\n        return matches;\r\n    }\r\n\r\n\r\n    /**\r\n     * Recupere un objet ClientRunnable en fonction du login (ex: antho123) passé en paramètre\r\n     * @param login le login du client recherché\r\n     * @return Un ClientRunnable si le client est bien trouvé dans la liste des clients connecté du server, null sinon\r\n     */\r\n    private ClientRunnable getClientRunnableByLogin(String login){\r\n        for(ClientRunnable cr : clientList){\r\n            if(cr.getUser().getLogin().equals(login)){\r\n                return cr;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    public boolean isRunning() {\r\n        return !this.serverSocket.isClosed();\r\n    }\r\n\r\n    public void save() throws UnableToSaveUserLibraryException, UnableToSaveTrendLibraryException {\r\n        userRepository.save(this.userLibrary);\r\n        trendRepository.save(this.trendLibrary);\r\n    }\r\n\r\n\r\n\r\n    @Override\r\n    public void close() {\r\n        try {\r\n            this.serverSocket.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    /************** GETTERS/SETTERS ***************/\r\n    public UserLibrary getUserLibrary() {\r\n        return userLibrary;\r\n    }\r\n\r\n    public TrendLibrary getTrendLibrary() {\r\n        return trendLibrary;\r\n    }\r\n\r\n    public String getDomain() {\r\n        try {\r\n            return InetAddress.getLocalHost().getCanonicalHostName();\r\n        } catch (UnknownHostException e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public ServerConfig getServerConfig() {\r\n        return serverConfig;\r\n    }\r\n\r\n    private static class MessageEncryptionException extends Exception {\r\n        public MessageEncryptionException(String message) {\r\n            super(message);\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/org/helmo/murmurG6/controller/ServerController.java b/app/src/main/java/org/helmo/murmurG6/controller/ServerController.java
--- a/app/src/main/java/org/helmo/murmurG6/controller/ServerController.java	(revision e0496eabb38fabbcc552fbdb8729d84c9293b990)
+++ b/app/src/main/java/org/helmo/murmurG6/controller/ServerController.java	(date 1676807025707)
@@ -111,8 +111,7 @@
      * @param idMessage L'id unique associé à ce message
      */
     private void castToFollowers(User senderClient, Set<UserCredentials> followers, String message, UUID idMessage) {
-        //Parcours de la liste des followers du sender + envoi des message
-        for(UserCredentials followerCreditential: followers){
+        for(UserCredentials followerCreditential : followers){
             manageMessageSending(senderClient, followerCreditential, idMessage, message);
         }
     }
@@ -121,7 +120,6 @@
     /**
      * Gère le casting de message pour à des followers d'une Trend
      * @param senderClient L'emetteur du message
-     * @param followers La liste des creditentials des followers de la trend(ex: antho123@server1)
      * @param message Le message à caster
      * @param idMessage L'id unique associé à ce message
      */
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"80d6a6b1-98ac-4076-b856-98bb2db1ca20\" name=\"Changes\" comment=\"refactor\">\r\n      <change afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/exceptions/UnableToConnectToClientException.java\" afterDir=\"false\" />\r\n      <change afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/exceptions/UnableToExecuteTaskException.java\" afterDir=\"false\" />\r\n      <change afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/exceptions/UnableToRunClientException.java\" afterDir=\"false\" />\r\n      <change afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/UnableToLoadTrendLibraryException.java\" afterDir=\"false\" />\r\n      <change afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/UnableToSaveTrendLibraryException.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/out/production/resources/storage/config.json\" beforeDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/out/production/resources/storage/trends.json\" beforeDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/out/production/resources/storage/users.json\" beforeDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/module-info.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/module-info.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/ClientRunnable.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/ClientRunnable.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/Executor.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/Executor.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/ServerController.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/ServerController.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/UnableToFollowUser.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/exceptions/UnableToFollowUserException.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/infrastructure/ServerJsonStorage.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/infrastructure/ServerJsonStorage.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/infrastructure/TrendJsonStorage.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/infrastructure/TrendJsonStorage.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/infrastructure/UserJsonStorage.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/infrastructure/UserJsonStorage.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/models/BCrypt.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/models/BCrypt.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/models/Trend.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/models/Trend.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/ServerRepository.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/ServerRepository.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/TrendRepository.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/TrendRepository.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/UserRepository.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/UserRepository.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/ReadServerConfigurationException.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/UnableToLoadServerConfigurationException.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/ReadUserCollectionException.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/UnableToLoadUserLibraryException.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/SaveUserCollectionException.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/UnableToSaveUserLibraryException.java\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"ExternalProjectsData\">\r\n    <projectState path=\"$PROJECT_DIR$\">\r\n      <ProjectState />\r\n    </projectState>\r\n  </component>\r\n  <component name=\"ExternalProjectsManager\">\r\n    <system id=\"GRADLE\">\r\n      <state>\r\n        <projects_view>\r\n          <tree_state>\r\n            <expand>\r\n              <path>\r\n                <item name=\"\" type=\"6a2764b6:ExternalProjectsStructure$RootNode\" />\r\n                <item name=\"murmurG6\" type=\"f1a62948:ProjectNode\" />\r\n              </path>\r\n            </expand>\r\n            <select />\r\n          </tree_state>\r\n        </projects_view>\r\n      </state>\r\n    </system>\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Class\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$\" value=\"SEND\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"MarkdownSettingsMigration\">\r\n    <option name=\"stateVersion\" value=\"1\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"2Lmh0hLTKUtBuN40b7K4kb9WNG3\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">{\r\n  &quot;keyToString&quot;: {\r\n    &quot;Git.Branch.Popup.ShowAllRemotes&quot;: &quot;true&quot;,\r\n    &quot;RunOnceActivity.OpenProjectViewOnStart&quot;: &quot;true&quot;,\r\n    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,\r\n    &quot;WebServerToolWindowFactoryState&quot;: &quot;false&quot;,\r\n    &quot;last_opened_file_path&quot;: &quot;C:/Users/loic/OneDrive/murmur_reseau_2023&quot;,\r\n    &quot;nodejs_package_manager_path&quot;: &quot;npm&quot;,\r\n    &quot;project.structure.last.edited&quot;: &quot;Project&quot;,\r\n    &quot;project.structure.proportion&quot;: &quot;0.0&quot;,\r\n    &quot;project.structure.side.proportion&quot;: &quot;0.0&quot;,\r\n    &quot;run.code.analysis.last.selected.profile&quot;: &quot;pProject Default&quot;,\r\n    &quot;settings.editor.selected.configurable&quot;: &quot;preferences.editor&quot;\r\n  }\r\n}</component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\Users\\loic\\OneDrive\\murmur_reseau_2023\\app\\src\\main\\resources\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\" selected=\"Application.Server\">\r\n    <configuration name=\"Server\" type=\"Application\" factoryName=\"Application\" singleton=\"false\">\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"org.helmo.murmurG6.App\" />\r\n      <module name=\"murmurG6.app.main\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"ProtocolTest\" type=\"JUnit\" factoryName=\"JUnit\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"murmurG6.app.test\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"org.helmo.murmurG6.models.exceptions.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <option name=\"PACKAGE_NAME\" value=\"org.helmo.murmurG6.models\" />\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"org.helmo.murmurG6.models.ProtocolTest\" />\r\n      <option name=\"TEST_OBJECT\" value=\"class\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <list>\r\n      <item itemvalue=\"Application.Server\" />\r\n      <item itemvalue=\"JUnit.ProtocolTest\" />\r\n    </list>\r\n    <recent_temporary>\r\n      <list>\r\n        <item itemvalue=\"JUnit.ProtocolTest\" />\r\n      </list>\r\n    </recent_temporary>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"80d6a6b1-98ac-4076-b856-98bb2db1ca20\" name=\"Changes\" comment=\"\" />\r\n      <created>1676481943477</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1676481943477</updated>\r\n      <workItem from=\"1676481944589\" duration=\"227000\" />\r\n      <workItem from=\"1676482180755\" duration=\"18175000\" />\r\n      <workItem from=\"1676502376711\" duration=\"1528000\" />\r\n      <workItem from=\"1676565664195\" duration=\"10555000\" />\r\n      <workItem from=\"1676624283319\" duration=\"680000\" />\r\n      <workItem from=\"1676632686940\" duration=\"57000\" />\r\n      <workItem from=\"1676632980625\" duration=\"6304000\" />\r\n      <workItem from=\"1676645843145\" duration=\"5547000\" />\r\n      <workItem from=\"1676717063661\" duration=\"356000\" />\r\n      <workItem from=\"1676717439369\" duration=\"5475000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"-\">\r\n      <created>1676482100001</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676482100001</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"Protocol refactor\">\r\n      <created>1676485808746</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676485808746</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"Protocol refactor\">\r\n      <created>1676489946605</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676489946605</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"Protocol refactor\">\r\n      <created>1676490400004</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676490400004</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"Protocol refactor\">\r\n      <created>1676490438171</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676490438171</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"Executor Refactored\">\r\n      <created>1676495983249</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676495983249</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00007\" summary=\"Executor Refactored\">\r\n      <created>1676496283418</created>\r\n      <option name=\"number\" value=\"00007\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676496283418</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00008\" summary=\"Refactored\">\r\n      <created>1676497044596</created>\r\n      <option name=\"number\" value=\"00008\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00008\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676497044596</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00009\" summary=\"Refactored\">\r\n      <created>1676498314522</created>\r\n      <option name=\"number\" value=\"00009\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00009\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676498314522</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00010\" summary=\"Refactored\">\r\n      <created>1676500552161</created>\r\n      <option name=\"number\" value=\"00010\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00010\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676500552161</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00011\" summary=\"Refactored\">\r\n      <created>1676500803589</created>\r\n      <option name=\"number\" value=\"00011\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00011\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676500803589</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00012\" summary=\"Refactored\">\r\n      <created>1676501692420</created>\r\n      <option name=\"number\" value=\"00012\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00012\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676501692420</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00013\" summary=\"Refactored\">\r\n      <created>1676566247526</created>\r\n      <option name=\"number\" value=\"00013\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00013\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676566247526</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00014\" summary=\"[ServerController] castMsg et extractTrends\">\r\n      <created>1676571727910</created>\r\n      <option name=\"number\" value=\"00014\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00014\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676571727910</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00015\" summary=\"[ServerController] castMsg et extractTrends\">\r\n      <created>1676578596322</created>\r\n      <option name=\"number\" value=\"00015\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00015\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676578596322</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00016\" summary=\"[ServerController] castMsg et extractTrends\">\r\n      <created>1676633022069</created>\r\n      <option name=\"number\" value=\"00016\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00016\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676633022069</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00017\" summary=\"commit\">\r\n      <created>1676633130438</created>\r\n      <option name=\"number\" value=\"00017\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00017\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676633130438</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00018\" summary=\"commit\">\r\n      <created>1676644128943</created>\r\n      <option name=\"number\" value=\"00018\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00018\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676644128943</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00019\" summary=\"commit\">\r\n      <created>1676646142140</created>\r\n      <option name=\"number\" value=\"00019\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00019\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676646142140</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00020\" summary=\"commit\">\r\n      <created>1676648026136</created>\r\n      <option name=\"number\" value=\"00020\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00020\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676648026136</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00021\" summary=\"commit\">\r\n      <created>1676648402147</created>\r\n      <option name=\"number\" value=\"00021\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00021\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676648402147</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00022\" summary=\"commit\">\r\n      <created>1676717385553</created>\r\n      <option name=\"number\" value=\"00022\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00022\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1676717385553</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"23\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State>\r\n              <option name=\"FILTERS\">\r\n                <map>\r\n                  <entry key=\"branch\">\r\n                    <value>\r\n                      <list>\r\n                        <option value=\"origin/echo_thread\" />\r\n                      </list>\r\n                    </value>\r\n                  </entry>\r\n                </map>\r\n              </option>\r\n            </State>\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"-\" />\r\n    <MESSAGE value=\"Protocol refactor\" />\r\n    <MESSAGE value=\"Executor Refactored\" />\r\n    <MESSAGE value=\"Refactored\" />\r\n    <MESSAGE value=\"[ServerController] castMsg et extractTrends\" />\r\n    <MESSAGE value=\"commit\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"commit\" />\r\n  </component>\r\n  <component name=\"XSLT-Support.FileAssociations.UIState\">\r\n    <expand />\r\n    <select />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision e0496eabb38fabbcc552fbdb8729d84c9293b990)
+++ b/.idea/workspace.xml	(date 1676807948089)
@@ -4,31 +4,9 @@
     <option name="autoReloadType" value="SELECTIVE" />
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="80d6a6b1-98ac-4076-b856-98bb2db1ca20" name="Changes" comment="refactor">
-      <change afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/exceptions/UnableToConnectToClientException.java" afterDir="false" />
-      <change afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/exceptions/UnableToExecuteTaskException.java" afterDir="false" />
-      <change afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/exceptions/UnableToRunClientException.java" afterDir="false" />
-      <change afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/UnableToLoadTrendLibraryException.java" afterDir="false" />
-      <change afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/UnableToSaveTrendLibraryException.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/out/production/resources/storage/config.json" beforeDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/out/production/resources/storage/trends.json" beforeDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/out/production/resources/storage/users.json" beforeDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/module-info.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/module-info.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/ClientRunnable.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/ClientRunnable.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/Executor.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/Executor.java" afterDir="false" />
+    <list default="true" id="80d6a6b1-98ac-4076-b856-98bb2db1ca20" name="Changes" comment="commit">
+      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/ServerController.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/ServerController.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/UnableToFollowUser.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/controller/exceptions/UnableToFollowUserException.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/infrastructure/ServerJsonStorage.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/infrastructure/ServerJsonStorage.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/infrastructure/TrendJsonStorage.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/infrastructure/TrendJsonStorage.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/infrastructure/UserJsonStorage.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/infrastructure/UserJsonStorage.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/models/BCrypt.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/models/BCrypt.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/models/Trend.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/models/Trend.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/ServerRepository.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/ServerRepository.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/TrendRepository.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/TrendRepository.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/UserRepository.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/UserRepository.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/ReadServerConfigurationException.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/UnableToLoadServerConfigurationException.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/ReadUserCollectionException.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/UnableToLoadUserLibraryException.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/SaveUserCollectionException.java" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/org/helmo/murmurG6/repository/exceptions/UnableToSaveUserLibraryException.java" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -67,7 +45,7 @@
   <component name="Git.Settings">
     <option name="RECENT_BRANCH_BY_REPOSITORY">
       <map>
-        <entry key="$PROJECT_DIR$" value="SEND" />
+        <entry key="$PROJECT_DIR$" value="SEND_MERGE_REFACTOR_FRANCHI" />
       </map>
     </option>
     <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
@@ -96,6 +74,9 @@
   }
 }</component>
   <component name="RecentsManager">
+    <key name="CreateClassDialog.RecentsKey">
+      <recent name="org.helmo.murmurG6.infrastructure" />
+    </key>
     <key name="MoveFile.RECENT_KEYS">
       <recent name="C:\Users\loic\OneDrive\murmur_reseau_2023\app\src\main\resources" />
     </key>
@@ -129,6 +110,7 @@
     </list>
     <recent_temporary>
       <list>
+        <item itemvalue="JUnit.ProtocolTest" />
         <item itemvalue="JUnit.ProtocolTest" />
       </list>
     </recent_temporary>
@@ -306,7 +288,14 @@
       <option name="project" value="LOCAL" />
       <updated>1676717385553</updated>
     </task>
-    <option name="localTasksCounter" value="23" />
+    <task id="LOCAL-00023" summary="commit">
+      <created>1676803620381</created>
+      <option name="number" value="00023" />
+      <option name="presentableId" value="LOCAL-00023" />
+      <option name="project" value="LOCAL" />
+      <updated>1676803620381</updated>
+    </task>
+    <option name="localTasksCounter" value="24" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
